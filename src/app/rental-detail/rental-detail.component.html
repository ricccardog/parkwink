<div class="container detail-view">

    <h4><b *ngIf="rental.customer_id">{{rental.customer_id.name | titlecase}} {{rental.customer_id.surname | titlecase}}'s</b> Rental Details
        <button *ngIf="editMode==false" type="button" class="btn btn-secondary edit-detail" (click)="startEditing()">EDIT MODE</button>
        <button *ngIf="editMode" type="button" class="btn btn-secondary edit-detail" (click)="startEditing()">EDIT MODE</button>

    </h4>

    <table class="table table-striped">
        
        <tbody ng-form="rentalForm">
            <tr>
                <td><b> Customer </b></td>
                <td>{{rental.customer_id ? (rental.customer_id.name | titlecase) : 'DELETED CUSTOMER'}} {{rental.customer_id ? (rental.customer_id.surname | titlecase) : ''}}</td>
                <td *ngIf="editMode"> 
                    <select name="customer" [(ngModel)]="editRental.customer_id" class="form-control">
                        <option value=undefined hidden disabled> Change customer </option>
                        <option *ngFor="let entry of customers" [value]="entry.id">{{entry.name | titlecase}} {{entry.surname | titlecase}}</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td><b>Car</b></td>
                <td>{{rental.car_id ? (rental.car_id.maker | titlecase) : 'DELETED CAR'}} {{ rental.car_id ? (rental.car_id.model | titlecase) : ''}}</td>
                <td *ngIf="editMode">
                    <select name="car" [(ngModel)]="editRental.car_id" class="form-control">
                        <option value=undefined hidden disabled> Change car</option>
                        <option *ngFor="let entry of cars" [value]="entry.id">{{entry.maker | titlecase}} {{entry.model | titlecase}}</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td><b>Starting Date</b></td>
                <td>{{rental.startDate | date: 'dd / MM / yyyy'}}</td>
                <td *ngIf="editMode">
                    <input type="date" name="startDate" [(ngModel)]="editRental.startDate" class="form-control">
                </td>
            </tr>

            <tr>
                <td><b>Ending Date</b></td>
                <td>{{rental.endDate | date: 'dd / MM / yyyy' }}</td>
                <td *ngIf="editMode">
                    <input type="date" name="endDate" [(ngModel)]="editRental.endDate" min="rental.startDate" class="form-control">
                </td>
            </tr>
   
            <tr>
                <td><b>Price</b></td>
                <td>{{rental.price}}</td>
                <td *ngIf="editMode">
                    <input type="number" name="price" [(ngModel)]="editRental.price" class="form-control" placeholder="Price">
                </td>
            </tr>
        </tbody>
    </table>
    
    <button *ngIf="editMode" class="btn btn-success confirm-edit" (click)="updateRental()">SAVE CHANGES</button>
    <button *ngIf="editMode==false" type="button" class="btn btn-danger delete-detail" (click)="deleteRental()">DELETE RENTAL</button>
    <button type="button" class="btn btn-secondary back-detail" (click)="goBack()">BACK</button>

</div>


